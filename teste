-- =============================================
-- FITAS LED SIMPLES E FUNCIONAL
-- =============================================

print("=== FITAS LED SIMPLES ===")

-- Pega as 4 telas
local telas = {peripheral.find("monitor")}
if not telas[1] then telas = {telas} end
if #telas > 4 then
    local temp = {}
    for i = 1, 4 do temp[i] = telas[i] end
    telas = temp
end

print("Telas: " .. #telas)

-- Configura
for i, tela in ipairs(telas) do
    tela.setTextScale(0.5)
end

-- Cores básicas para LED
local cores = {
    colors.red,
    colors.orange, 
    colors.yellow,
    colors.green,
    colors.blue,
    colors.purple,
    colors.pink
}

-- EFEITO 1: COR ÚNICA DESLIZANTE
function fitaSimples()
    print("Fita Simples - Cor Deslizante")
    
    local pos = 0
    
    while true do
        pos = pos + 1
        
        for i, tela in ipairs(telas) do
            local w, h = tela.getSize()
            tela.setBackgroundColor(colors.black)
            tela.clear()
            
            -- Uma única barra colorida deslizando
            local xBarra = (pos % w) + 1
            local cor = cores[(i + math.floor(pos/w)) % #cores + 1]
            
            -- Desenha a barra
            for y = 1, h do
                tela.setBackgroundColor(cor)
                tela.setCursorPos(xBarra, y)
                tela.write(" ")
            end
        end
        
        os.sleep(0.1)
    end
end

-- EFEITO 2: MULTIPLAS BARRAS
function fitaBarras()
    print("Fita com Múltiplas Barras")
    
    local offset = 0
    
    while true do
        offset = offset + 1
        
        for i, tela in ipairs(telas) do
            local w, h = tela.getSize()
            tela.setBackgroundColor(colors.black)
            tela.clear()
            
            -- 3 barras coloridas
            for barra = 1, 3 do
                local x = (offset + barra * 3) % w + 1
                local cor = cores[(i + barra) % #cores + 1]
                
                for y = 1, h do
                    tela.setBackgroundColor(cor)
                    tela.setCursorPos(x, y)
                    tela.write(" ")
                end
            end
        end
        
        os.sleep(0.15)
    end
end

-- EFEITO 3: PREENCHIMENTO TOTAL
function fitaCheia()
    print("Fita com Cores Cheias")
    
    local corIndex = 1
    
    while true do
        corIndex = corIndex + 1
        if corIndex > #cores then corIndex = 1 end
        
        for i, tela in ipairs(telas) do
            local w, h = tela.getSize()
            local cor = cores[(corIndex + i - 2) % #cores + 1]
            
            -- Preenche tela inteira com uma cor
            tela.setBackgroundColor(cor)
            tela.clear()
        end
        
        os.sleep(0.5)
    end
end

-- EFEITO 4: PONTOS DE LUZ
function fitaPontos()
    print("Fita com Pontos de Luz")
    
    local tempo = 0
    
    while true do
        tempo = tempo + 1
        
        for i, tela in ipairs(telas) do
            local w, h = tela.getSize()
            tela.setBackgroundColor(colors.black)
            tela.clear()
            
            -- Pontos de luz se movendo
            for ponto = 1, 5 do
                local x = (tempo + ponto * 2) % w + 1
                local y = math.floor(h / 2)
                local cor = cores[(ponto + i) % #cores + 1]
                
                tela.setBackgroundColor(cor)
                tela.setCursorPos(x, y)
                tela.write(" ")
                
                -- Acima e abaixo
                if y > 1 then
                    tela.setCursorPos(x, y - 1)
                    tela.write(" ")
                end
                if y < h then
                    tela.setCursorPos(x, y + 1)
                    tela.write(" ")
                end
            end
        end
        
        os.sleep(0.2)
    end
end

-- Menu simples
function menu()
    print("\n=== FITAS LED ===")
    print("1. Cor Deslizante")
    print("2. Múltiplas Barras")
    print("3. Cores Cheias")
    print("4. Pontos de Luz")
    print("==================")
    
    write("Escolha (1-4): ")
    local e = read()
    
    if e == "1" then fitaSimples()
    elseif e == "2" then fitaBarras()
    elseif e == "3" then fitaCheia()
    elseif e == "4" then fitaPontos()
    else print("Inválido!"); os.sleep(1) end
end

-- Iniciar
while true do
    menu()
end
