-- =============================================
-- OLHO GIGANTESCO EM TELA ÃšNICA GIGANTE
-- =============================================

print("=== INICIANDO OLHO GIGANTESCO ===")

-- Pega TODAS as telas
local telas = {peripheral.find("monitor")}
if not telas[1] then telas = {telas} end

print("Telas detectadas: " .. #telas)

-- Configura todas as telas
for i, tela in ipairs(telas) do
    tela.setTextScale(0.5)
    tela.setBackgroundColor(colors.black)
    tela.clear()
end

-- Sistema da Tela Ãšnica Gigante
local gridTelaGigante = {}
local larguraGigante, alturaGigante = 0, 0
local tempo = 0

-- Criar a tela Ãºnica gigante com todas as telas
function criarTelaGigante()
    print("Criando tela gigante com " .. #telas .. " telas...")
    
    local larguraTela, alturaTela = 8, 5  -- Tamanho base
    local xAtual, yAtual = 1, 1
    
    -- Organizar todas as telas em uma grade contÃ­nua
    for i, tela in ipairs(telas) do
        tela.posXGlobal = xAtual
        tela.posYGlobal = yAtual
        tela.largura = larguraTela
        tela.altura = alturaTela
        
        -- Atualizar dimensÃµes da tela gigante
        larguraGigante = math.max(larguraGigante, xAtual + larguraTela - 1)
        alturaGigante = math.max(alturaGigante, yAtual + alturaTela - 1)
        
        -- PrÃ³xima posiÃ§Ã£o (linha contÃ­nua)
        xAtual = xAtual + larguraTela
        
        -- Quebra de linha apÃ³s muitas telas na horizontal
        if i % 12 == 0 then  -- 12 telas por linha
            xAtual = 1
            yAtual = yAtual + alturaTela
        end
    end
    
    print("TELA GIGANTE CRIADA: " .. larguraGigante .. "x" .. alturaGigante)
end

-- Limpar TODAS as telas
function limparTodasTelas()
    for i, tela in ipairs(telas) do
        tela.setBackgroundColor(colors.black)
        tela.clear()
    end
end

-- Desenhar na tela gigante (coordendas globais)
function desenharNaTelaGigante(xGlobal, yGlobal, cor)
    for i, tela in ipairs(telas) do
        -- Verificar se estas coordenadas globais estÃ£o nesta tela
        if xGlobal >= tela.posXGlobal and xGlobal < tela.posXGlobal + tela.largura and
           yGlobal >= tela.posYGlobal and yGlobal < tela.posYGlobal + tela.altura then
            
            -- Converter para coordenadas locais da tela
            local xLocal = xGlobal - tela.posXGlobal + 1
            local yLocal = yGlobal - tela.posYGlobal + 1
            
            -- Desenhar
            tela.setBackgroundColor(cor)
            tela.setCursorPos(xLocal, yLocal)
            tela.write(" ")
            return true
        end
    end
    return false
end

-- AGORA MANDA SEU CÃ“DIGO DO OLHO!
-- Vou chamar sua funÃ§Ã£o desenharOlhoGigante(xGlobal, yGlobal)
-- Onde xGlobal, yGlobal sÃ£o coordenadas na tela gigante

-- Movimento do olho pela tela gigante
function movimentoSuaveTelaGigante(t)
    -- Movimento que percorre toda a Ã¡rea gigante
    local velocidade = 0.1
    
    -- Percorrer bordas da tela gigante
    local perimeter = 2 * (larguraGigante + alturaGigante)
    local pos = (t * velocidade * 50) % perimeter
    
    local x, y
    
    if pos < larguraGigante then
        -- Topo
        x = pos + 1
        y = 1
    elseif pos < larguraGigante + alturaGigante then
        -- Direita
        x = larguraGigante
        y = pos - larguraGigante + 1
    elseif pos < 2 * larguraGigante + alturaGigante then
        -- Fundo
        x = larguraGigante - (pos - larguraGigante - alturaGigante)
        y = alturaGigante
    else
        -- Esquerda
        x = 1
        y = alturaGigante - (pos - 2 * larguraGigante - alturaGigante)
    end
    
    return math.floor(x), math.floor(y)
end

function movimentoOndulatorio(t)
    -- Movimento de onda por toda a tela
    local x = (math.sin(t * 0.05) * 0.5 + 0.5) * (larguraGigante - 1) + 1
    local y = (math.cos(t * 0.08) * 0.5 + 0.5) * (alturaGigante - 1) + 1
    
    return math.floor(x), math.floor(y)
end

-- AnimaÃ§Ã£o principal (AGUARDANDO SEU CÃ“DIGO DO OLHO)
function executarAnimacao()
    print("\n=== AGUARDANDO SEU CÃ“DIGO DO OLHO ===")
    print("Implemente a funÃ§Ã£o: desenharOlhoGigante(xGlobal, yGlobal)")
    print("Onde xGlobal, yGlobal sÃ£o coordenadas na tela gigante")
    print("Tamanho da tela gigante: " .. larguraGigante .. "x" .. alturaGigante)
    
    -- Aqui vai chamar sua funÃ§Ã£o do olho gigante
    while true do
        local x, y = movimentoSuaveTelaGigante(tempo)
        
        -- LIMPAR TELAS
        limparTodasTelas()
        
        -- ðŸŽ¯ AQUI VOCÃŠ IMPLEMENTA SEU OLHO GIGANTE!
        -- desenharOlhoGigante(x, y)
        
        -- Exemplo temporÃ¡rio (substitua pelo seu olho)
        desenharNaTelaGigante(x, y, colors.white)
        desenharNaTelaGigante(x+1, y, colors.white)
        desenharNaTelaGigante(x, y+1, colors.white)
        desenharNaTelaGigante(x+1, y+1, colors.white)
        
        tempo = tempo + 0.1
        os.sleep(0.15)
    end
end

-- Programa principal
if #telas == 0 then
    print("ERRO: Nenhuma tela detectada!")
else
    criarTelaGigante()
    executarAnimacao()
end
